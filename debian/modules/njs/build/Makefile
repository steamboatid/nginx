
# This file is auto-generated by configure

NJS_CC = cc
NJS_STATIC_LINK = ar -r -c
NJS_LINK = cc -O
NJS_CFLAGS =  -pipe -fPIC -fvisibility=hidden -O -W -Wall -Wextra -Wno-unused-parameter -Wwrite-strings -Wmissing-prototypes -Werror -g -fexcess-precision=standard -O -lpcre2-8 -O3  -Wno-deprecated-declarations -DNDK_SET_VAR -DNDK_UPSTREAM_LIST

NJS_VER = 0.7.10
#define NJS_VERSION_NUMBER          0x00070a
NJS_TYPES_VER = $(NJS_VER)

NPM = npm

default: njs

NJS_LIB_INCS =  \
	-Isrc \
	-Ibuild
NJS_LIB_OBJS = build/src/njs_diyfp.o \
	build/src/njs_dtoa.o \
	build/src/njs_dtoa_fixed.o \
	build/src/njs_str.o \
	build/src/njs_strtod.o \
	build/src/njs_murmur_hash.o \
	build/src/njs_djb_hash.o \
	build/src/njs_utf8.o \
	build/src/njs_utf16.o \
	build/src/njs_arr.o \
	build/src/njs_rbtree.o \
	build/src/njs_lvlhsh.o \
	build/src/njs_trace.o \
	build/src/njs_random.o \
	build/src/njs_md5.o \
	build/src/njs_sha1.o \
	build/src/njs_sha2.o \
	build/src/njs_time.o \
	build/src/njs_file.o \
	build/src/njs_malloc.o \
	build/src/njs_mp.o \
	build/src/njs_sprintf.o \
	build/src/njs_utils.o \
	build/src/njs_chb.o \
	build/src/njs_value.o \
	build/src/njs_vm.o \
	build/src/njs_vmcode.o \
	build/src/njs_boolean.o \
	build/src/njs_number.o \
	build/src/njs_symbol.o \
	build/src/njs_string.o \
	build/src/njs_object.o \
	build/src/njs_object_prop.o \
	build/src/njs_array.o \
	build/src/njs_json.o \
	build/src/njs_function.o \
	build/src/njs_regexp.o \
	build/src/njs_date.o \
	build/src/njs_error.o \
	build/src/njs_math.o \
	build/src/njs_timer.o \
	build/src/njs_module.o \
	build/src/njs_event.o \
	build/src/njs_extern.o \
	build/src/njs_variable.o \
	build/src/njs_builtin.o \
	build/src/njs_lexer.o \
	build/src/njs_lexer_keyword.o \
	build/src/njs_parser.o \
	build/src/njs_generator.o \
	build/src/njs_disassembler.o \
	build/src/njs_array_buffer.o \
	build/src/njs_typed_array.o \
	build/src/njs_promise.o \
	build/src/njs_encoding.o \
	build/src/njs_iterator.o \
	build/src/njs_scope.o \
	build/src/njs_async.o \
	build/src/njs_buffer.o \
	build/external/njs_crypto_module.o \
	build/external/njs_fs_module.o \
	build/external/njs_query_string_module.o \
	build/build/njs_modules.o \
	

libnjs: build/libnjs.a pc

build/libnjs.a:   \
	build/njs_auto_config.h \
	$(NJS_LIB_OBJS)

	$(NJS_STATIC_LINK) build/libnjs.a \
		$(NJS_LIB_OBJS)

build/src/njs_diyfp.o: src/njs_diyfp.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_diyfp.o \
		-MMD -MF build/src/njs_diyfp.dep -MT build/src/njs_diyfp.o \
		src/njs_diyfp.c
		

-include build/src/njs_diyfp.dep


build/src/njs_dtoa.o: src/njs_dtoa.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_dtoa.o \
		-MMD -MF build/src/njs_dtoa.dep -MT build/src/njs_dtoa.o \
		src/njs_dtoa.c
		

-include build/src/njs_dtoa.dep


build/src/njs_dtoa_fixed.o: src/njs_dtoa_fixed.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_dtoa_fixed.o \
		-MMD -MF build/src/njs_dtoa_fixed.dep -MT build/src/njs_dtoa_fixed.o \
		src/njs_dtoa_fixed.c
		

-include build/src/njs_dtoa_fixed.dep


build/src/njs_str.o: src/njs_str.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_str.o \
		-MMD -MF build/src/njs_str.dep -MT build/src/njs_str.o \
		src/njs_str.c
		

-include build/src/njs_str.dep


build/src/njs_strtod.o: src/njs_strtod.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_strtod.o \
		-MMD -MF build/src/njs_strtod.dep -MT build/src/njs_strtod.o \
		src/njs_strtod.c
		

-include build/src/njs_strtod.dep


build/src/njs_murmur_hash.o: src/njs_murmur_hash.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_murmur_hash.o \
		-MMD -MF build/src/njs_murmur_hash.dep -MT build/src/njs_murmur_hash.o \
		src/njs_murmur_hash.c
		

-include build/src/njs_murmur_hash.dep


build/src/njs_djb_hash.o: src/njs_djb_hash.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_djb_hash.o \
		-MMD -MF build/src/njs_djb_hash.dep -MT build/src/njs_djb_hash.o \
		src/njs_djb_hash.c
		

-include build/src/njs_djb_hash.dep


build/src/njs_utf8.o: src/njs_utf8.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_utf8.o \
		-MMD -MF build/src/njs_utf8.dep -MT build/src/njs_utf8.o \
		src/njs_utf8.c
		

-include build/src/njs_utf8.dep


build/src/njs_utf16.o: src/njs_utf16.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_utf16.o \
		-MMD -MF build/src/njs_utf16.dep -MT build/src/njs_utf16.o \
		src/njs_utf16.c
		

-include build/src/njs_utf16.dep


build/src/njs_arr.o: src/njs_arr.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_arr.o \
		-MMD -MF build/src/njs_arr.dep -MT build/src/njs_arr.o \
		src/njs_arr.c
		

-include build/src/njs_arr.dep


build/src/njs_rbtree.o: src/njs_rbtree.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_rbtree.o \
		-MMD -MF build/src/njs_rbtree.dep -MT build/src/njs_rbtree.o \
		src/njs_rbtree.c
		

-include build/src/njs_rbtree.dep


build/src/njs_lvlhsh.o: src/njs_lvlhsh.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_lvlhsh.o \
		-MMD -MF build/src/njs_lvlhsh.dep -MT build/src/njs_lvlhsh.o \
		src/njs_lvlhsh.c
		

-include build/src/njs_lvlhsh.dep


build/src/njs_trace.o: src/njs_trace.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_trace.o \
		-MMD -MF build/src/njs_trace.dep -MT build/src/njs_trace.o \
		src/njs_trace.c
		

-include build/src/njs_trace.dep


build/src/njs_random.o: src/njs_random.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_random.o \
		-MMD -MF build/src/njs_random.dep -MT build/src/njs_random.o \
		src/njs_random.c
		

-include build/src/njs_random.dep


build/src/njs_md5.o: src/njs_md5.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_md5.o \
		-MMD -MF build/src/njs_md5.dep -MT build/src/njs_md5.o \
		src/njs_md5.c
		

-include build/src/njs_md5.dep


build/src/njs_sha1.o: src/njs_sha1.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_sha1.o \
		-MMD -MF build/src/njs_sha1.dep -MT build/src/njs_sha1.o \
		src/njs_sha1.c
		

-include build/src/njs_sha1.dep


build/src/njs_sha2.o: src/njs_sha2.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_sha2.o \
		-MMD -MF build/src/njs_sha2.dep -MT build/src/njs_sha2.o \
		src/njs_sha2.c
		

-include build/src/njs_sha2.dep


build/src/njs_time.o: src/njs_time.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_time.o \
		-MMD -MF build/src/njs_time.dep -MT build/src/njs_time.o \
		src/njs_time.c
		

-include build/src/njs_time.dep


build/src/njs_file.o: src/njs_file.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_file.o \
		-MMD -MF build/src/njs_file.dep -MT build/src/njs_file.o \
		src/njs_file.c
		

-include build/src/njs_file.dep


build/src/njs_malloc.o: src/njs_malloc.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_malloc.o \
		-MMD -MF build/src/njs_malloc.dep -MT build/src/njs_malloc.o \
		src/njs_malloc.c
		

-include build/src/njs_malloc.dep


build/src/njs_mp.o: src/njs_mp.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_mp.o \
		-MMD -MF build/src/njs_mp.dep -MT build/src/njs_mp.o \
		src/njs_mp.c
		

-include build/src/njs_mp.dep


build/src/njs_sprintf.o: src/njs_sprintf.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_sprintf.o \
		-MMD -MF build/src/njs_sprintf.dep -MT build/src/njs_sprintf.o \
		src/njs_sprintf.c
		

-include build/src/njs_sprintf.dep


build/src/njs_utils.o: src/njs_utils.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_utils.o \
		-MMD -MF build/src/njs_utils.dep -MT build/src/njs_utils.o \
		src/njs_utils.c
		

-include build/src/njs_utils.dep


build/src/njs_chb.o: src/njs_chb.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_chb.o \
		-MMD -MF build/src/njs_chb.dep -MT build/src/njs_chb.o \
		src/njs_chb.c
		

-include build/src/njs_chb.dep


build/src/njs_value.o: src/njs_value.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_value.o \
		-MMD -MF build/src/njs_value.dep -MT build/src/njs_value.o \
		src/njs_value.c
		

-include build/src/njs_value.dep


build/src/njs_vm.o: src/njs_vm.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_vm.o \
		-MMD -MF build/src/njs_vm.dep -MT build/src/njs_vm.o \
		src/njs_vm.c
		

-include build/src/njs_vm.dep


build/src/njs_vmcode.o: src/njs_vmcode.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_vmcode.o \
		-MMD -MF build/src/njs_vmcode.dep -MT build/src/njs_vmcode.o \
		src/njs_vmcode.c
		

-include build/src/njs_vmcode.dep


build/src/njs_boolean.o: src/njs_boolean.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_boolean.o \
		-MMD -MF build/src/njs_boolean.dep -MT build/src/njs_boolean.o \
		src/njs_boolean.c
		

-include build/src/njs_boolean.dep


build/src/njs_number.o: src/njs_number.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_number.o \
		-MMD -MF build/src/njs_number.dep -MT build/src/njs_number.o \
		src/njs_number.c
		

-include build/src/njs_number.dep


build/src/njs_symbol.o: src/njs_symbol.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_symbol.o \
		-MMD -MF build/src/njs_symbol.dep -MT build/src/njs_symbol.o \
		src/njs_symbol.c
		

-include build/src/njs_symbol.dep


build/src/njs_string.o: src/njs_string.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_string.o \
		-MMD -MF build/src/njs_string.dep -MT build/src/njs_string.o \
		src/njs_string.c
		

-include build/src/njs_string.dep


build/src/njs_object.o: src/njs_object.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_object.o \
		-MMD -MF build/src/njs_object.dep -MT build/src/njs_object.o \
		src/njs_object.c
		

-include build/src/njs_object.dep


build/src/njs_object_prop.o: src/njs_object_prop.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_object_prop.o \
		-MMD -MF build/src/njs_object_prop.dep -MT build/src/njs_object_prop.o \
		src/njs_object_prop.c
		

-include build/src/njs_object_prop.dep


build/src/njs_array.o: src/njs_array.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_array.o \
		-MMD -MF build/src/njs_array.dep -MT build/src/njs_array.o \
		src/njs_array.c
		

-include build/src/njs_array.dep


build/src/njs_json.o: src/njs_json.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_json.o \
		-MMD -MF build/src/njs_json.dep -MT build/src/njs_json.o \
		src/njs_json.c
		

-include build/src/njs_json.dep


build/src/njs_function.o: src/njs_function.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_function.o \
		-MMD -MF build/src/njs_function.dep -MT build/src/njs_function.o \
		src/njs_function.c
		

-include build/src/njs_function.dep


build/src/njs_regexp.o: src/njs_regexp.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_regexp.o \
		-MMD -MF build/src/njs_regexp.dep -MT build/src/njs_regexp.o \
		src/njs_regexp.c
		

-include build/src/njs_regexp.dep


build/src/njs_date.o: src/njs_date.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_date.o \
		-MMD -MF build/src/njs_date.dep -MT build/src/njs_date.o \
		src/njs_date.c
		

-include build/src/njs_date.dep


build/src/njs_error.o: src/njs_error.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_error.o \
		-MMD -MF build/src/njs_error.dep -MT build/src/njs_error.o \
		src/njs_error.c
		

-include build/src/njs_error.dep


build/src/njs_math.o: src/njs_math.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_math.o \
		-MMD -MF build/src/njs_math.dep -MT build/src/njs_math.o \
		src/njs_math.c
		

-include build/src/njs_math.dep


build/src/njs_timer.o: src/njs_timer.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_timer.o \
		-MMD -MF build/src/njs_timer.dep -MT build/src/njs_timer.o \
		src/njs_timer.c
		

-include build/src/njs_timer.dep


build/src/njs_module.o: src/njs_module.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_module.o \
		-MMD -MF build/src/njs_module.dep -MT build/src/njs_module.o \
		src/njs_module.c
		

-include build/src/njs_module.dep


build/src/njs_event.o: src/njs_event.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_event.o \
		-MMD -MF build/src/njs_event.dep -MT build/src/njs_event.o \
		src/njs_event.c
		

-include build/src/njs_event.dep


build/src/njs_extern.o: src/njs_extern.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_extern.o \
		-MMD -MF build/src/njs_extern.dep -MT build/src/njs_extern.o \
		src/njs_extern.c
		

-include build/src/njs_extern.dep


build/src/njs_variable.o: src/njs_variable.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_variable.o \
		-MMD -MF build/src/njs_variable.dep -MT build/src/njs_variable.o \
		src/njs_variable.c
		

-include build/src/njs_variable.dep


build/src/njs_builtin.o: src/njs_builtin.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_builtin.o \
		-MMD -MF build/src/njs_builtin.dep -MT build/src/njs_builtin.o \
		src/njs_builtin.c
		

-include build/src/njs_builtin.dep


build/src/njs_lexer.o: src/njs_lexer.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_lexer.o \
		-MMD -MF build/src/njs_lexer.dep -MT build/src/njs_lexer.o \
		src/njs_lexer.c
		

-include build/src/njs_lexer.dep


build/src/njs_lexer_keyword.o: src/njs_lexer_keyword.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_lexer_keyword.o \
		-MMD -MF build/src/njs_lexer_keyword.dep -MT build/src/njs_lexer_keyword.o \
		src/njs_lexer_keyword.c
		

-include build/src/njs_lexer_keyword.dep


build/src/njs_parser.o: src/njs_parser.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_parser.o \
		-MMD -MF build/src/njs_parser.dep -MT build/src/njs_parser.o \
		src/njs_parser.c
		

-include build/src/njs_parser.dep


build/src/njs_generator.o: src/njs_generator.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_generator.o \
		-MMD -MF build/src/njs_generator.dep -MT build/src/njs_generator.o \
		src/njs_generator.c
		

-include build/src/njs_generator.dep


build/src/njs_disassembler.o: src/njs_disassembler.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_disassembler.o \
		-MMD -MF build/src/njs_disassembler.dep -MT build/src/njs_disassembler.o \
		src/njs_disassembler.c
		

-include build/src/njs_disassembler.dep


build/src/njs_array_buffer.o: src/njs_array_buffer.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_array_buffer.o \
		-MMD -MF build/src/njs_array_buffer.dep -MT build/src/njs_array_buffer.o \
		src/njs_array_buffer.c
		

-include build/src/njs_array_buffer.dep


build/src/njs_typed_array.o: src/njs_typed_array.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_typed_array.o \
		-MMD -MF build/src/njs_typed_array.dep -MT build/src/njs_typed_array.o \
		src/njs_typed_array.c
		

-include build/src/njs_typed_array.dep


build/src/njs_promise.o: src/njs_promise.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_promise.o \
		-MMD -MF build/src/njs_promise.dep -MT build/src/njs_promise.o \
		src/njs_promise.c
		

-include build/src/njs_promise.dep


build/src/njs_encoding.o: src/njs_encoding.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_encoding.o \
		-MMD -MF build/src/njs_encoding.dep -MT build/src/njs_encoding.o \
		src/njs_encoding.c
		

-include build/src/njs_encoding.dep


build/src/njs_iterator.o: src/njs_iterator.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_iterator.o \
		-MMD -MF build/src/njs_iterator.dep -MT build/src/njs_iterator.o \
		src/njs_iterator.c
		

-include build/src/njs_iterator.dep


build/src/njs_scope.o: src/njs_scope.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_scope.o \
		-MMD -MF build/src/njs_scope.dep -MT build/src/njs_scope.o \
		src/njs_scope.c
		

-include build/src/njs_scope.dep


build/src/njs_async.o: src/njs_async.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_async.o \
		-MMD -MF build/src/njs_async.dep -MT build/src/njs_async.o \
		src/njs_async.c
		

-include build/src/njs_async.dep


build/src/njs_buffer.o: src/njs_buffer.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/src/njs_buffer.o \
		-MMD -MF build/src/njs_buffer.dep -MT build/src/njs_buffer.o \
		src/njs_buffer.c
		

-include build/src/njs_buffer.dep


build/external/njs_crypto_module.o: external/njs_crypto_module.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/external/njs_crypto_module.o \
		-MMD -MF build/external/njs_crypto_module.dep -MT build/external/njs_crypto_module.o \
		external/njs_crypto_module.c
		

-include build/external/njs_crypto_module.dep


build/external/njs_fs_module.o: external/njs_fs_module.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/external/njs_fs_module.o \
		-MMD -MF build/external/njs_fs_module.dep -MT build/external/njs_fs_module.o \
		external/njs_fs_module.c
		

-include build/external/njs_fs_module.dep


build/external/njs_query_string_module.o: external/njs_query_string_module.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/external/njs_query_string_module.o \
		-MMD -MF build/external/njs_query_string_module.dep -MT build/external/njs_query_string_module.o \
		external/njs_query_string_module.c
		

-include build/external/njs_query_string_module.dep


build/build/njs_modules.o: build/njs_modules.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/build/njs_modules.o \
		-MMD -MF build/build/njs_modules.dep -MT build/build/njs_modules.o \
		build/njs_modules.c
		

-include build/build/njs_modules.dep


build/njs: \
	build/libnjs.a \
	src/njs_shell.c
	$(NJS_LINK) -o build/njs $(NJS_CFLAGS) \
		  $(NJS_LIB_INCS) -Injs \
		src/njs_shell.c \
		build/libnjs.a \
		-O -lm    -lreadline


build/njs_process_script_fuzzer.o: \
	src/njs_shell.c
	$(NJS_CC) -c $(CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-DNJS_FUZZER_TARGET \
		-o build/njs_process_script_fuzzer.o \
		src/njs_shell.c

build/njs_process_script_fuzzer: \
	build/libnjs.a \
	build/njs_process_script_fuzzer.o
	$(CXX) $(CXXFLAGS) -o build/njs_process_script_fuzzer \
		  $(NJS_LIB_INCS) -Injs \
		$(LIB_FUZZING_ENGINE) \
		build/njs_process_script_fuzzer.o \
		build/libnjs.a \
		-lm   


build/lvlhsh_unit_test: src/test/lvlhsh_unit_test.c \
	build/libnjs.a
	$(NJS_LINK) -o build/lvlhsh_unit_test $(NJS_CFLAGS) \
		$(NJS_LIB_INCS) -MMD -MF build/test/lvlhsh_unit_test.dep -MT build/lvlhsh_unit_test.c \
		src/test/lvlhsh_unit_test.c build/libnjs.a \
		 -lm -O

-include build/test/lvlhsh_unit_test.dep


build/random_unit_test: src/test/random_unit_test.c \
	build/libnjs.a
	$(NJS_LINK) -o build/random_unit_test $(NJS_CFLAGS) \
		$(NJS_LIB_INCS) -MMD -MF build/test/random_unit_test.dep -MT build/random_unit_test.c \
		src/test/random_unit_test.c build/libnjs.a \
		 -lm -O

-include build/test/random_unit_test.dep


build/rbtree_unit_test: src/test/rbtree_unit_test.c \
	build/libnjs.a
	$(NJS_LINK) -o build/rbtree_unit_test $(NJS_CFLAGS) \
		$(NJS_LIB_INCS) -MMD -MF build/test/rbtree_unit_test.dep -MT build/rbtree_unit_test.c \
		src/test/rbtree_unit_test.c build/libnjs.a \
		 -lm -O

-include build/test/rbtree_unit_test.dep


build/unicode_unit_test: src/test/unicode_unit_test.c \
	build/libnjs.a
	$(NJS_LINK) -o build/unicode_unit_test $(NJS_CFLAGS) \
		$(NJS_LIB_INCS) -MMD -MF build/test/unicode_unit_test.dep -MT build/unicode_unit_test.c \
		src/test/unicode_unit_test.c build/libnjs.a \
		 -lm -O

-include build/test/unicode_unit_test.dep


build/test/njs_externals_test.o: \
    src/test/njs_externals_test.c
	$(NJS_CC) -c $(NJS_CFLAGS)   \
		$(NJS_LIB_INCS) -Injs \
		-o build/test/njs_externals_test.o \
		-MMD -MF build/test/njs_externals_test.dep -MT build/test/njs_externals_test.o \
		src/test/njs_externals_test.c
		

-include build/test/njs_externals_test.dep


build/njs_unit_test: src/test/njs_unit_test.c \
	build/libnjs.a \
	build/test/njs_externals_test.o
	$(NJS_LINK) -o build/njs_unit_test $(NJS_CFLAGS) \
		  $(NJS_LIB_INCS) \
		-MMD -MF build/test/njs_unit_test.dep -MT build/njs_unit_test.c \
		build/test/njs_externals_test.o \
		-Injs src/test/njs_unit_test.c build/libnjs.a \
		-O -lm   
		

-include build/test/njs_unit_test.dep


build/njs_benchmark: src/test/njs_benchmark.c \
	build/libnjs.a \
	build/test/njs_externals_test.o
	$(NJS_LINK) -o build/njs_benchmark $(NJS_CFLAGS) \
		  $(NJS_LIB_INCS) \
		-MMD -MF build/test/njs_benchmark.dep -MT build/njs_benchmark.c \
		build/test/njs_externals_test.o \
		-Injs src/test/njs_benchmark.c build/libnjs.a \
		-O -lm   
		

-include build/test/njs_benchmark.dep


build/njs_auto_config.h:
	@echo
	@echo " Please run ./configure before make"
	@echo
	@exit 1

all: build/njs_auto_config.h \
	njs ts test lib_test benchmark

njs: build/njs_auto_config.h build/njs
njs_fuzzer: build/njs_auto_config.h \
	build/njs_process_script_fuzzer

lib_test: build/njs_auto_config.h \
	build/random_unit_test \
	build/rbtree_unit_test \
	build/lvlhsh_unit_test \
	build/unicode_unit_test

	build/random_unit_test
	build/rbtree_unit_test
	build/lvlhsh_unit_test
	build/unicode_unit_test

test262: njs

	test/test262 --binary=build/njs

unit_test: build/njs_auto_config.h \
	build/njs_unit_test

	build/njs_unit_test

test: shell_test unit_test test262

benchmark: build/njs_auto_config.h \
	build/njs_benchmark

	build/njs_benchmark

dist:
	rm -rf njs-$(NJS_VER) \
	&& hg archive njs-$(NJS_VER).tar.gz \
		-p njs-$(NJS_VER) \
		-X ".hg*" \
	&& echo njs-$(NJS_VER).tar.gz done

build/ts/package.json: ts/ngx_stream_js_module.d.ts \
	ts/ngx_core.d.ts \
	ts/njs_modules/crypto.d.ts \
	ts/njs_modules/querystring.d.ts \
	ts/njs_modules/fs.d.ts \
	ts/index.d.ts \
	ts/package.json \
	ts/njs_core.d.ts \
	ts/ngx_http_js_module.d.ts \
	ts/njs_webcrypto.d.ts \
	ts/njs_shell.d.ts \
	ts/tsconfig.json \
	
	cp -fr ts build/
	cp LICENSE build/ts/
	sed 's/__VERSION__/"$(NJS_TYPES_VER)"/' \
		ts/package.json > build/ts/package.json

build/ts/node_modules: build/ts/package.json
	cd build/ts && $(NPM) install
	touch build/ts/node_modules

build/njs-types-$(NJS_TYPES_VER).tgz: build/ts/package.json
	hg id -i > build/ts/COMMITHASH || true
	cd build && $(NPM) pack ./ts

.PHONY: ts
ts: build/ts/package.json

ts_lint: build/ts/node_modules
	cd build/ts && $(NPM) run lint

build/test/ts/package.json: test/ts/package.json \
	test/ts/test.ts \
	test/ts/tsconfig.json \
	
	mkdir -p build/test
	cp -fr test/ts build/test/

build/test/ts/node_modules: \
	build/njs-types-$(NJS_TYPES_VER).tgz \
	build/test/ts/package.json
	cd build/test/ts && $(NPM) install \
		--save-dev file:../../njs-types-$(NJS_TYPES_VER).tgz
	cd build/test/ts && $(NPM) install
	touch build/test/ts/node_modules

ts_test: build/test/ts/node_modules
	cd build/test/ts && $(NPM) test

ts_publish: ts_clean build/njs-types-$(NJS_TYPES_VER).tgz
	cd build/ && $(NPM) publish njs-types-$(NJS_TYPES_VER).tgz

ts_clean:
	rm -rf build/ts

pc: build/njs.pc

build/njs.pc: build/njs_auto_config.h
	sed -e "s,@PREFIX@,/tb2/root/github/nginx/debian/modules/njs/build," \
		-e "s,@LIBDIR@,/tb2/root/github/nginx/debian/modules/njs/build," \
		-e "s,@CFLAGS@,-I/tb2/root/github/nginx/debian/modules/njs/build -I/tb2/root/github/nginx/debian/modules/njs/src," \
		-e "s,@VERSION@,$(NJS_VER)," \
		-e "s,@EXTRA_LIBS@,-lm   ," \
		src/njs.pc.in > $@

shell_test:
	@echo "Skipping expect tests"
